# Branch를 나눠 버전을 관리해보자

## 1. branch를 왜 나누느냐?
보통 작업을 진행하다 추가하고 싶은 기능이 생겼거나 개발 방향성이 좀 달라졌다 싶을 때 내가 현재 작업 중인 버전에서 바로 기능 추가 & 개발 방향 바꾸기는 매우매우 모험적일 것이다.

그럴 때 보통 잔가지를 치듯 현재 작업 중인 버전의 복사본 같은 것을 만들어 그쪽에서 기능을 테스트하다가 합치는 방법을 쓰면 더 똑똑하게 개발할 수 있을 것이다.

branch를 나누는 방법은 아래와 같다.

```bash
git branch 브랜치명
```
그럼 내가 지정한 이름으로 브랜치가 만들어졌다. 근데 별 일 안 일어난 것처럼 보인다. 브랜치를 보고 싶다면 이렇게 치자.

```bash
git branch
```
그럼 내가 등록한 브랜치를 죄다 보여준다. 브랜치로 이동하려면 두 가지 방법이 있는데,  
1. git switch 브랜치명
2. git checkout 브랜치명

이렇게 두 방법을 쓴다. 각자 편한대로 쓰면 된다. checkout은 이외에도 상당히 많은 것을 할 수 있는데, 요즘은 살짝 위험한 측면이 있어 개개인이 알아서 사용하면 될 것이다.

그리고 항상 내가 어느 브랜치에 있는 지 확인하도록 하자. 브랜치 확인법은 git bash 사용자 분들은 명령줄 입력란 바로 위에 (master), (main)을 확인하는 것이고, 일반 터미널 이용자들은 git status를 찍어서 확인하는 것이다. git bash를 이용하면 내가 어느 브랜치에 있는 지 눈에 띄게 알려주기 때문에 좋다.

## 2. branch 합치기
한창 작업하다 기능이 꽤 완전하게 구현되어 본래 작업물과 합치고 싶다. 이럴 때 사용하는 게 merge이다.

하나 예시를 들어보자.

내가 홈페이지를 만들던 중 멤버쉽 기능을 만들고 싶어졌다. main 에서 작업하던 내용에서 membership 브랜치를 새로 만들어 이런저런 커밋도 해보고 기능 구현도 해보다가 잘 되는 것 같아 다시 main에 작업내용을 합치고 싶어졌다.

이때 브랜치는 대략 이런 모습일 것이다.

```bash
    /-- membership
main
```
main에서 membership이 갈라져나와 계속 작업됐으므로 딱히 충돌은 발생하지 않을 것이다. 충돌이 발생하는 상황이 좀 골치 아픈데, 같은 파일 내 작업된 내용이 서로 다르거나 남들이 작업하던 내용을 내 작업 환경으로 끌어올 때 충돌이 발생한다. 이러면 어떤 내역을 유지할 지 결정해야 되는데, 그것은 나중에 설명한다.

작업내역을 합치고 싶다면 다시 git switch main으로 돌아와 main 상태에서 아래 명령어를 입력해준다.
```bash
git merge membership
```
그럼 main에 membership에서 작업하던 내용들이 쫘르륵 뜰 것이다.

브랜치를 합친 뒤에도 membership 브랜치에는 내용물이 계속 남아있다. branch를 삭제하고 싶다면 이렇게 입력하자.

```bash
git branch -d membership
```
강제 삭제하고 싶으면 -D 대문자로 쓰면 된다. 후폭풍은 알아서 책임지자.

## 3. 충돌 관리하기
일반적으로 이상적이고 깔끔한 merge는 혼자 작업할 때나 그럴 것이고, 협업하면서 정말 엄청나게 많은 충돌 사례를 경험할 수 있을 것이다. 따라서 commit 메세지를 남길 때나 branch 이름을 남들이 봐도 어디가 어떻게 수정됐는 지 알기 쉽게 짓는 것이 중요하다. 괜히 개발자들이 개발에서 가장 많이 고민하는 부분이 **이름 짓기**인 게 아니다.

일단 충돌이 발생하는 대표적인 시나리오는 브랜치끼리 왔다갔다하며 기능 테스트를 하거나 남들이 작업한 내용을 main에 끌어왔다가 내가 작업한 내용을 main에 합치려고 할 때 일 텐데, 충돌이 발생한 부분을 git이 매우매우 강조해 주며 확인하라고 한다.

VScode를 사용하는 사람들은 충돌난 부분 보면서 수동 merge 해주면 된다. (다른 운영체제 환경은 아직 안 겪어봤고 경험이 없어 잘 모르겠다.)